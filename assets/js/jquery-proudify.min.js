// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};e=jQuery;i=function(){function t(e,t){var n,r;this.element=e;this.settings=t;this.data=[];r=this.create("div",{"class":"proudify "+this.settings.service}).appendTo(this.element);this.list=this.create("ul").appendTo(r);this.preloader=this.create("li",{"class":"loading"}).appendTo(this.list);n=this.create("span",{"class":"desc",html:this.settings.loading_message}).appendTo(this.preloader);this.fetch(this.url())}t.prototype.url=function(){return""};t.prototype.fetch=function(t){var n,r;n=this;if(t.length===0)return;t.indexOf("?")===-1?r="?":r="&";r+="callback=?";return e.getJSON(t+r,function(e){var t;n.collect(e);t=n.paginate(e);return t?n.fetch(t):n.render()})};t.prototype.collect=function(e){var t,n,r,i,s;i=e.data;s=[];for(n=0,r=i.length;n<r;n++){t=i[n];s.push(this.data.push(t))}return s};t.prototype.paginate=function(e){return!1};t.prototype.create=function(t,n){return e("<"+t+"/>",n)};t.prototype.render=function(t,n){var r;this.preloader.remove();r=this;e.each(t,function(e,t){var i;if(t.git_url){if(t.fork&&!r.settings.forks)return;if(r.settings.num>0&&e===settings.num)return!1}if(t.course_url&&r.settings.completed&&-1===t.badge.search(/completed/))return;i={li:r.create("li").appendTo(r.list),link:r.create("a")};return n(r,t,i)});return this.element};return t}();t=function(e){function t(){s=t.__super__.constructor.apply(this,arguments);return s}f(t,e);t.prototype.url=function(){return"http://www.codeschool.com/users/"+this.settings.username+".json"};t.prototype.collect=function(e){var t,n,r,i,s;i=e.badges;s=[];for(n=0,r=i.length;n<r;n++){t=i[n];s.push(this.data.push(t))}return s};t.prototype.render=function(){return t.__super__.render.call(this,this.data,function(e,t,n){n.link.attr("href","http://www.codeschool.com/users/"+e.settings.username).attr("target","_blank").appendTo(n.li);return e.create("img",{alt:t.name,title:t.name,src:t.badge}).appendTo(n.link)})};return t}(i);n=function(e){function t(){o=t.__super__.constructor.apply(this,arguments);return o}f(t,e);t.prototype.url=function(){return"http://coderwall.com/"+this.settings.username+".json"};t.prototype.collect=function(e){var t,n,r,i,s;i=e.data.badges;s=[];for(n=0,r=i.length;n<r;n++){t=i[n];s.push(this.data.push(t))}return s};t.prototype.render=function(){return t.__super__.render.call(this,this.data,function(e,t,n){n.link.attr("href","http://coderwall.com/"+e.settings.username).attr("target","_blank").appendTo(n.li);return e.create("img",{alt:t.name,title:t.description,src:t.badge}).appendTo(n.link)})};return t}(i);r=function(e){function t(){u=t.__super__.constructor.apply(this,arguments);return u}f(t,e);t.prototype.url=function(){return"https://api.github.com/users/"+this.settings.username+"/repos"};t.prototype.paginate=function(e){return e.meta&&e.meta.Link&&e.meta.Link[0][1].rel!=="first"?e.meta.Link[0][0]:!1};t.prototype.render=function(){var e,n;e=(new Date).setDate((new Date).getDate()-this.settings.pushed_at);n=this.data.sort(function(e,t){return new Date(t.pushed_at)-new Date(e.pushed_at)});return t.__super__.render.call(this,n,function(t,n,r){r.link.attr("href",n.html_url).attr("target","_blank").html(n.name).appendTo(r.li);t.create("span",{"class":"desc",html:n.description}).appendTo(r.li);return new Date(n.pushed_at)>e?t.create("span",{"class":"status green",html:t.settings.ongoing_status}).appendTo(r.li):t.create("span",{"class":"status red",html:t.settings.onhold_status}).appendTo(r.li)})};return t}(i);e.fn.extend({proudify:function(i){var s,o,u;s=[0,2,0];o={github:r,coderwall:n,codeschool:t};u=e.extend({},{username:!1,service:"github",pushed_at:120,num:0,forks:!1,loading_message:"Loading ...",ongoing_status:"ONGOING",onhold_status:"ON HOLD",completed:!1},i||{});u.username&&new o[u.service](this,u);return this}})}).call(this);